<html lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="css/main.css" rel="stylesheet" type="text/css">
<title>DxBase2016ドキュメント(2016年)</title>
</head>
<body>
<!-- 全体コンテナ　-->
<div id="container">
<div id="header">
<h2>０．チュートリアル</h2>
</div>
<!-- コンテンツ　-->
<div id="contents">
<h3>００８．アップデート系コンポーネント</h3>
<br />
<h4>プレイヤーと様々なオブジェクト</h4>
　ここでは、プレイヤーをはじめ、プレイヤーに影響を与える様々なオブジェクトを実装します。<br />
　<b>Tutorial008ディレクトリ</b>のソリューションをリビルドし、実行すると以下のような実行画面になります。<br />
　<b>XBox360コントローラ</b>により中央に配置されいている球体を、左スティック移動させることができます。Aボタンでジャンプします。チュートリアル004で説明した<b>LoookAtCamera</b>と組み合わせることによって、自由に向きを変えながら移動させることができます。
<br />
<p>&nbsp;</p>
<img src="img/0008a.jpg" width="80%"/>
<p>図0008a</p>
<p>&nbsp;</p>
<br/>
<h4>プレイヤー</h4>
　プレイヤーは前項で使用したプレイヤーの、OnLastUpdate()関数を修正したものです。ここでは、プレイヤーと衝突する平面である<b>HitTestSquareクラス</b>との関連を追加記述しています。Collisionコンポーネントを使わずに、プレイヤーと他オブジェクトとの衝突判定するヒントになるかもしれません。詳しくはソースを見てください。<br />
<br />
<h4>そのほかのオブジェクト</h4>
　チュートリアル008にはプレイヤーのほかに、プレイヤーを追いかけるオブジェクトが4つ配置されています。内容は前項と同じです。<br />
　そのほかにも、衝突判定する平面や、障害物球やカプセルなども配置されています。それぞれどのようなクラスか、参照してみましょう。プレイヤー以外のクラスは、<b>Charactor.hとCharactor.cpp</b>に記述があります。<br />
<br />
　<b>DxBase2016</b>には<b>ステアリング</b>はこのサンプルで紹介したほかにも、いくつか用意されています。自作することも可能です。それらの紹介は、のちのサンプルで行います。<br />
<br />
<h4>影を細かくする</h4>
　このサンプルでは、影を細かくしています。<br />
　<b>GameStage::CreateViews()関数</b>には、

<div class="box1">
<pre>
        //パラメータは4096.0fにしている
        //影を細かくするとメモリを大量に消費するので注意！
        CreateDefaultRenderTargets(4096.0f);
        //影のビューサイズの設定。この値を小さくすると影が表示される範囲が小さくなる。
        //値が小さいほうが影は細かくなる
        //スタティック変数なので一度設定したらその値はステージを超えて保持される。
        Shadowmap::SetViewSize(16.0f);
</pre>
</div>
　のような記述があります。これにより影が細かくなります。以下の図を確認しましょう。上が2096.0fと32.0fの組み合わせです（前項サンプルなど）。これを4096.f、16.0fにすると下図のようになります。
<p>&nbsp;</p>
<img src="img/0008b.jpg" width="80%"/>
<p>&nbsp;</p>
<img src="img/0008c.jpg" width="80%"/>
<p>図0008b、図0008c</p>
<p>&nbsp;</p>
　シャドウマップのサイズの4096.fは大きくしたほうが影が表示される領域が拡大されます。<br />
　影を細かくすると、そのぶん影が描画される領域が狭くなります。前項の設定では32.0fメートル四方（概算）内に影が描画されます。上記の設定ではこれを16.0f（16.0fメートル四方）にしているわけです。ですからその分、影が細かくなります。<br />
　作成するゲームの奥行や幅が狭い範囲であれば細かくするのもいいでしょうが、広い場合は、奥の方の影が切れるのがわかります。違和感のないサイズに調整するといいでしょう。<br />
<br />
</div>
<!-- /コンテンツ　-->
<hr>
<!-- フッタ　-->
<ul class="foot_navi">
<li><a href="00_07.html">前ページ</a></li>
<li><a href="index.html">目次</a></li>
</ul>
<!-- /フッタ　-->


</div>
<!-- /全体コンテナ　-->
</body>
</html>
